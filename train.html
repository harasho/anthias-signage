<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body { background:#fff; color:#000; font-family:sans-serif; font-size:2em; padding:30px; }
    .line { margin-bottom:1em; }
  </style>
</head>
<body>
  <h1>運行情報</h1>
  <div id="info"></div>

  <script>
    async function fetchRSS(url, lineName) {
      const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`);
      const data = await response.json();
      const parser = new DOMParser();
      const xml = parser.parseFromString(data.contents, "text/xml");
      const item = xml.querySelector("item > title")?.textContent || "取得失敗";
      return `<div class="line"><strong>${lineName}：</strong> ${item}</div>`;
    }

    async function load() {
      const list = [
        { name: "横須賀線", url: "https://transit.yahoo.co.jp/traininfo/rss/33.xml" },
        { name: "湘南新宿ライン", url: "https://transit.yahoo.co.jp/traininfo/rss/179.xml" },
        { name: "京急本線", url: "https://transit.yahoo.co.jp/traininfo/rss/68.xml" },
        { name: "東急東横線", url: "https://transit.yahoo.co.jp/traininfo/rss/23.xml" },
        { name: "南武線", url: "https://transit.yahoo.co.jp/traininfo/rss/42.xml" }
      ];

      const results = await Promise.all(
        list.map(line => fetchRSS(line.url, line.name))
      );
      document.getElementById("info").innerHTML = results.join("");
    }

    load();
    setInterval(load, 300000); // 5分おきに更新
  </script>
</body>
</html>
